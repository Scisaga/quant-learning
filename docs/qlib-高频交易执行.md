## 高频交易的嵌套决策执行框架设计

日度交易（如投资组合管理）和日内交易（如订单执行）是量化投资的热门话题，通常被单独研究。
- **问题**：
  - 要获得日度和日内交易的联合性能，必须让它们相互交互并进行联合回测。
  - 为了支持多级联合回测策略，需要相应的框架。
  - 公开的高频交易框架未考虑多级联合交易，导致回测不准确。
- **策略优化问题**：
  - 不同级别的策略优化不是独立的，相互影响。例如，最佳投资组合管理策略可能随着订单执行性能的改变而变化（例如，当订单执行策略改善时，高换手率的组合可能变得更好）。
  - 要实现整体良好性能，需要考虑不同级别策略的交互。

![Design of the Framework](img/qlib-1762377282108.png)

框架设计每个级别包括`Trading Agent`（交易代理）和`Execution Env`（执行环境）。

- **Trading Agent 组件**：
  - `Information Extractor`：数据处理模块。
  - `Forecast Model`：预测模块，输出预测信号。
  - `Decision Generator`：决策生成器，根据预测信号生成决策。
- **工作流程**：
  - 交易算法通过`Decision Generator`生成决策。
  - 决策传递给`Execution Env`，返回执行结果。
- **自定义性**：
  - 用户可自定义交易算法的频率（例如，日内、日频、周频）、决策内容和执行环境。
  - 执行环境可嵌套更细粒度的交易算法和环境（即子工作流，例如，日频订单可日内拆分成更细决策）。
- **优势**：
  - 灵活性便于用户探索不同级别交易策略的组合效果。
  - 打破不同级别交易算法之间的优化壁垒。
- **优化支持**：通过 QlibRL 支持嵌套决策执行框架的优化。